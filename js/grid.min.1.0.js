function isEmpty(e){return e===void 0}var $event=$.event,$special,resizeTimeout;$special=$event.special.debouncedresize={setup:function(){$(this).on("resize",$special.handler)},teardown:function(){$(this).off("resize",$special.handler)},handler:function(e,t){var i=this,n=arguments,a=function(){e.type="debouncedresize",$event.dispatch.apply(i,n)};resizeTimeout&&clearTimeout(resizeTimeout),t?a():resizeTimeout=setTimeout(a,$special.threshold)},threshold:250};var BLANK="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";$.fn.imagesLoaded=function(e){function t(){var t=$(l),i=$(c);a&&(c.length?a.reject(r,t,i):a.resolve(r)),$.isFunction(e)&&e.call(n,r,t,i)}function i(e,i){e.src!==BLANK&&-1===$.inArray(e,s)&&(s.push(e),i?c.push(e):l.push(e),$.data(e,"imagesLoaded",{isBroken:i,src:e.src}),o&&a.notifyWith($(e),[i,r,$(l),$(c)]),r.length===s.length&&(setTimeout(t),r.unbind(".imagesLoaded")))}var n=this,a=$.isFunction($.Deferred)?$.Deferred():0,o=$.isFunction(a.notify),r=n.find("img").add(n.filter("img")),s=[],l=[],c=[];return $.isPlainObject(e)&&$.each(e,function(t,i){"callback"===t?e=i:a&&a[t](i)}),r.length?r.bind("load.imagesLoaded error.imagesLoaded",function(e){i(e.target,"error"===e.type)}).each(function(e,t){var n=t.src,a=$.data(t,"imagesLoaded");return a&&a.src===n?(i(t,a.isBroken),void 0):t.complete&&void 0!==t.naturalWidth?(i(t,0===t.naturalWidth||0===t.naturalHeight),void 0):((t.readyState||t.complete)&&(t.src=BLANK,t.src=n),void 0)}):t(),a?a.promise(n):n};var Grid=function(){function e(e){$(".og-grid.hidden,.main.og-loading").toggleClass("hidden"),b=$.extend(!0,{},b,e),l.imagesLoaded(function(){t(!0),n(),i()})}function t(e){c.each(function(){var t=$(this);t.data("offsetTop",t.offset().top),e&&t.data("height",t.height())})}function i(){c.on("click","span.og-close",function(){return o(),!1}).children("a").on("click",function(){var e=$(this).parent();return u===e.index()?o():a(e),!1}),f.on("debouncedresize",function(){h=0,d=-1,t(),n();var e=$.data(this,"preview");e!==void 0&&o()})}function n(){s={width:f.width(),height:f.height()}}function a(e){var t=$.data(this,"preview"),i=e.data("offsetTop");if(h=0,t!==void 0){if(d===i)return t.update(e),!1;i>d&&(h=t.height),o()}d=i,t=$.data(this,"preview",new r(e)),t.open()}function o(){u=-1;var e=$.data(this,"preview");e.close(),$.removeData(this,"preview")}function r(e){this.$item=e,this.expandedIdx=this.$item.index(),this.create(),this.update()}var s,l=$("#og-grid"),c=l.children("li"),u=-1,d=-1,h=0,p=10,f=$(window),m=$("html, body"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},v=g[Modernizr.prefixed("transition")],y=Modernizr.csstransitions,b={minHeight:500,speed:350,easing:"ease"};return r.prototype={create:function(){this.$title=$("<h3></h3>"),this.$description=$("<div></div>"),this.$href=$('<a href="#"></a>'),this.$details=$('<div class="og-details"></div>').append(this.$title,this.$description,this.$href),this.$loading=$('<div class="og-loading"><p>Loading...</p></div>'),this.$fullimage=$('<div class="og-fullimg"></div>').append(this.$loading),this.$closePreview=$('<span class="og-close"></span>'),this.$previewInner=$('<div class="og-expander-inner"></div>').append(this.$closePreview,this.$fullimage,this.$details),this.$previewEl=$('<div class="og-expander"></div>').append(this.$previewInner),this.$item.append(this.getEl()),y&&this.setTransition()},update:function(e){if(e&&(this.$item=e),-1!==u){var t=c.eq(u);t.removeClass("og-expanded"),this.$item.addClass("og-expanded"),t.find(".custom").remove(),this.positionPreview()}u=this.$item.index();var i=this.$item.children("a"),n={href:i.attr("href"),largesrc:i.data("largesrc"),title:i.data("title"),type:i.data("type"),custom:i.data("custom"),init:i.data("init"),cta:i.data("cta")===void 0?"Let's Talk":i.data("cta"),href:i.data("url"),subtitle:i.data("subtitle"),description:i.data("description")},a=this.$item.children("a").children("div.slides").length>0,o=!isEmpty(n.custom);isEmpty(n.subtitle)?this.$title.html(n.title):this.$title.html(n.title+"<small>"+n.subtitle+"</small>"),this.$description.html("<p>"+n.description+"</p>"),this.$href.attr("href",n.href),this.$href.html(n.cta),"promo"==n.type&&this.$href.attr("target","_blank");var r=this;if(r.$largeImg!==void 0&&r.$largeImg.remove(),$(".slides.visible-slide").remove(),r.$fullimage.is(":visible"))if(this.$loading.show(),a){var s=this.$item.find("div.og-fullimg")[0];isEmpty(s)&&(s=this.$fullimage),this.$loading.show();var l=$(this.$item.find("div.slides")[0]).clone();setTimeout(function(){$(l).appendTo($(s)),$(l).addClass("visible-slide"),$(l).slidesjs({pagination:{active:!1},navigation:{active:!0,effect:"slide"},callback:{loaded:function(){r.$loading.hide(),$(".slidesjs-navigation").html("");var e=$(l.find("img")[0]);r.$title.html(n.title+"<small>"+e.data("subtitle")+"</small>"),r.$description.html("<p>"+e.data("description")+"</p>")},complete:function(e){var t=$(l.find("img")[e-1]);r.$title.html(n.title+"<small>"+t.data("subtitle")+"</small>"),r.$description.html("<p>"+t.data("description")+"</p>")}}})},500)}else if(o){r.$loading.hide(),r.$fullimage.find("img").remove();var s=this.$item.find("div.og-fullimg")[0],d=$("#"+n.custom).clone();$(d).appendTo($(s));var h=window[n.init];"function"==typeof h&&h(),r.$loading.hide()}else $("<img/>").load(function(){var e=$(this);e.attr("src")===r.$item.children("a").data("largesrc")&&(r.$loading.hide(),r.$fullimage.find("img").remove(),r.$largeImg=e.fadeIn(350),r.$fullimage.append(r.$largeImg))}).attr("src",n.largesrc)},open:function(){setTimeout($.proxy(function(){this.setHeights(),this.positionPreview()},this),25)},close:function(){var e=this,t=function(){y&&$(this).off(v),e.$item.removeClass("og-expanded"),e.$previewEl.remove()};return setTimeout($.proxy(function(){this.$largeImg!==void 0&&this.$largeImg.fadeOut("fast"),this.$previewEl.css("height",0);var e=c.eq(this.expandedIdx);e.css("height",e.data("height")).on(v,t),y||t.call()},this),25),!1},calcHeight:function(){var e=s.height-this.$item.data("height")-p,t=s.height;b.minHeight>e&&(e=b.minHeight,t=b.minHeight+this.$item.data("height")+p),this.height=e,this.itemHeight=t},setHeights:function(){var e=this,t=function(){y&&e.$item.off(v),e.$item.addClass("og-expanded")};this.calcHeight(),this.$previewEl.css("height",this.height),this.$item.css("height",this.itemHeight).on(v,t),y||t.call()},positionPreview:function(){var e=this.$item.data("offsetTop"),t=this.$previewEl.offset().top-h,i=this.height+this.$item.data("height")+p<=s.height?e:this.height<s.height?t-(s.height-this.height):t;m.animate({scrollTop:i},b.speed)},setTransition:function(){this.$previewEl.css("transition","height "+b.speed+"ms "+b.easing),this.$item.css("transition","height "+b.speed+"ms "+b.easing)},getEl:function(){return this.$previewEl}},{init:e}}();